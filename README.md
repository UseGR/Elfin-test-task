# Scoring Service

## Описание проекта

Данный проект представляет собой **Rest-сервис**, который выполняет **скоринг-оценку компании** на основе входных
данных. Проект разработан с использованием **Spring Boot** и предоставляет два основных эндпоинта для запуска и проверки
результатов процесса скоринга.

### Функционал

1. **Запуск скоринг-оценки**
    - Эндпоинт: `/api/v1.0/scoring/start`
    - Метод: `POST`
    - Порт: `8080`
    - Описание: Принимает входные данные в формате `JSON` с телом:
        - `individualTaxpayerNumber` — ИНН компании
        - `regionalCode` — регион расположения компании
        - `capital` — капитал компании
    - Пример запроса:
      ```json
      {
        "individualTaxpayerNumber": "73250292018",
        "regionalCode": 77,
        "capital": 10000000
      }
      ```
    - Пример ответа:
      ```json
      {
        "id": "8debceba-a644-486b-bc4c-801593ed69f0"
      }
      ```
        - Описание: Возвращает технический идентификатор запущенного процесса скоринг-оценки.

2. **Получение результата скоринг-оценки**
    - Эндпоинт: `/api/v1.0/context/get`
    - Метод: `GET`
    - Порт: `8081`
    - Описание: Проверяет состояние процесса скоринг-оценки по его техническому идентификатору.
    - Пример запроса:
      ```
      /api/v1.0/context/get?processId=8debceba-a644-486b-bc4c-801593ed69f0
      ```
    - Пример ответа:
      ```json
      {
        "processId": "8debceba-a644-486b-bc4c-801593ed69f0",
        "individualTaxpayerNumber": "73250292018",
        "regionalCode": 77,
        "capital": 10000000,
        "scoring": false,
        "description": [
          "Компания успешно прошла скоринг-оценку"
        ]
      }
      ```
## Системные требования

Для запуска проекта необходимо:

- Установленный **Docker Compose**
- Свободные порты `8080` и `8081`

## Запуск проекта

### Windows

Запустить скрипт `start.bat`:

```bash
start.bat
```
### Unix

Запустить скрипт `start.sh`:

```bash
start.sh
```

После этого сервисы будут доступны на следующих портах:

Сервис для запуска скоринг-оценки: http://localhost:8080
Сервис для получения результата: http://localhost:8081

# Технологии
1. Java 21
2. Spring Boot
3. Docker Compose
4. Camunda
5. Postgresql
6. ElasticSearch
7. Gradle

# Как работать с проектом
1. Клонируйте себе этот проект: git clone https://github.com/UseGR/Elfin-test-task.git
2. Перейдите в директорию проекта
3. Запустите start.bat или start.sh, в зависимости от ОС
4. Запуск процесса скоринга
Отправьте POST-запрос на эндпоинт http://localhost:8080/api/v1.0/scoring/start с данными компании.

5. Проверка статуса процесса
Отправьте POST-запрос на эндпоинт http://localhost:8081/api/v1.0/context/get с техническим идентификатором, полученным на предыдущем шаге.

PS: Контейнер context-api поднимается дольше, чем контейнер camunda-app



